<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="stockin"></ion-back-button>
    </ion-buttons>
    <ion-title>
      Update Stock
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card>
    <ion-item>
      <ion-label position="floating">Search</ion-label>
      <ion-input type="text" name="search" [formControl]="searchControl" [(ngModel)]="searchTerm"
        (ionChange)="setFilteredItems()"></ion-input>
    </ion-item>
  </ion-card>
  <div *ngIf="searching" class="ion-text-center" text-center>
    <ion-spinner></ion-spinner>
  </div>

  <div text-center class="ion-padding-top">Or</div>

  <ion-row>
    <ion-col text-center class="ion-padding-top">
      <ion-button routerLink="/scanin" color="success" shape="round">
        <ion-icon slot="start" name="star"></ion-icon>
        Scan
      </ion-button>
    </ion-col>
  </ion-row>

  <div *ngIf="(searchData.status); else noData">
    <ion-card *ngFor="let result of searchData.data">
      <ion-row>
        <ion-col>
          <form >
            <ion-item lines="none">
              <ion-thumbnail>
                <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
              </ion-thumbnail>
              <ion-item lines="none">
                <p>{{result.title}}</p>
              </ion-item>
            </ion-item>

            <ion-row>
              <ion-col size="6" size-sm>
                <ion-item>
                  <ion-label position="floating">Add Quantity</ion-label>
                  <ion-input type="number" name="quantity" maxlength="5" #qtyInput></ion-input>
                </ion-item>
                <div class="ion-text-end">Available: {{result.quantity}}</div>
              </ion-col>
              <!-- <ion-col size="6" size-sm> 
                <ion-item>
                  <ion-label position="floating">Product Condition</ion-label>
                  <ion-select placeholder="Select One" name="product_status_id" [(ngModel)]="stock.product_status_id">
                    <ion-select-option value="1">New</ion-select-option>
                    <ion-select-option value="2">Old</ion-select-option>
                    <ion-select-option value="3">Return</ion-select-option>
                    <ion-select-option value="4">Other</ion-select-option>
                  </ion-select>
                </ion-item>
              </ion-col> -->
            </ion-row>
            <p>If Return then ask from witch platform it comes</p>
            <!-- <ion-list>
              <ion-item>
                <ion-label  position="floating">Return from</ion-label>
                <ion-select placeholder="Select One" name="marketplace_id" [(ngModel)]="stock.marketplace_id">
                  <ion-select-option value="1">Amazon</ion-select-option>
                  <ion-select-option value="2">Paytm</ion-select-option>
                  <ion-select-option value="3">Flipkart</ion-select-option>
                  <ion-select-option value="4">Shop</ion-select-option>
                  <ion-select-option value="5">Other</ion-select-option>
                </ion-select>
              </ion-item>
            </ion-list> -->
            <ion-button color="success" (click)="updateStock(qtyInput.value, result.id)" type="submit" block>Update</ion-button>
            <ion-button color="danger" type="button" block>Edit</ion-button>
          </form>
        </ion-col>
      </ion-row>
    </ion-card>
  </div>
  <ng-template #noData>
    <div class="ion-text-center">
      {{noDataFound}}
    </div>
  </ng-template>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>