<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Profile
    </ion-title>

  </ion-toolbar>
</ion-header>

<ion-content>
  <form #form="ngForm" [formGroup]="updateDetails">
    <ion-grid>
      <ion-row color="primary" justify-content-center>
        <ion-col align-self-center size-md="6" size-lg="5" size-xs="12">
          <div text-center>
            <h3>Update your account!</h3>
          </div>
          <div padding>
            
            <ion-row>
              <ion-col size="12" size-sm class="ion-text-center">

                  <ion-list *ngIf="!croppedImagepath">
                      <ion-item class="ion-text-center" lines="none">
                        <ion-thumbnail>
                          <ion-img [src]="defaultdImg"></ion-img>
                        </ion-thumbnail>
                      </ion-item>
                    </ion-list>
                    <ion-list *ngIf="!isLoading && croppedImagepath">
                      <ion-item class="ion-text-center">
                        <ion-thumbnail>
                          <ion-img [src]="croppedImagepath"></ion-img>
                        </ion-thumbnail>
                      </ion-item>
                    </ion-list>

                <ion-button *ngIf="!isLoading" (click)="pickImage()" color="primary" small
                  color="tertiary" shape="round">Upload Image</ion-button>
                <ion-button *ngIf="isLoading && !croppedImagepath" color="primary" small color="tertiary" shape="round">
                  Loading ...</ion-button>
              </ion-col>
              <ion-input type="hidden" formControlName="image" [(ngModel)]="profile.image" name="image"></ion-input>
            </ion-row>
            <ion-item>
              <ion-label position="floating">Store Name</ion-label>
              <ion-input [(ngModel)]="profile.store_name" name="store_name" type="text" maxLength="50"
                formControlName="store_name"></ion-input>
            </ion-item>
            <div *ngIf=" f.store_name.errors && f.store_name.touched" class="invalid-feedback">
              <div *ngIf="f.store_name.errors.maxlength">Store name cannot be greater than 50 characters.</div>
            </div>
            <ion-item>
              <ion-label position="floating">Name</ion-label>
              <ion-input name="name" [value]="username" type="text" [disabled]="true"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Mobile</ion-label>
              <ion-input name="mobile" [value]="mobile" maxLength="10" type="text" [disabled]="true"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Email</ion-label>
              <ion-input name="email" [value]="email" type="email" [disabled]="true"></ion-input>
            </ion-item>

            <ion-item>
              <ion-label position="floating">City</ion-label>
              <ion-input [(ngModel)]="profile.city" name="city" type="text" maxLength="50" formControlName="city">
              </ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">State</ion-label>
              <ion-input [(ngModel)]="profile.state" name="state" type="text" maxLength="50" formControlName="state">
              </ion-input>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Address</ion-label>
              <ion-textarea [(ngModel)]="profile.address" rows="3" cols="20" placeholder="Enter any address here..."
                maxLength="250" formControlName="address"></ion-textarea>
            </ion-item>

          </div>
          <div padding>
            <ion-button size="large" type="submit" [disabled]="form.invalid" expand="block" (click)="update()">
              Update</ion-button>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>